<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Linux.sh | Faraz Ahary</title>
<meta name="keywords" content="bash, security, linux, tui, whiptail">
<meta name="description" content="A bash script to harden debian/ubuntu server installs for security, as well as automating some other useful tasks like setting up a wireguard vpn.">
<meta name="author" content="linux, bash">
<link rel="canonical" href="https://faraz.eu.org/posts/linux.sh/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c5277e43fde8b6dabe803dff75b3c935ba15f1a218d18c0bcbaba3460636ce74.css" integrity="sha256-xSd&#43;Q/3ottq&#43;gD3/dbPJNboV8aIY0YwLy6ujRgY2znQ=" rel="preload stylesheet" as="style">
<noscript>
    <link crossorigin="anonymous" href="/css/includes/noscript.30127fa68e36d08f5dd7f9d4e717dac42e729b844672afd0fbcacb0d9e508595.css" integrity="sha256-MBJ/po420I9d1/nU5xfaxC5ym4RGcq/Q&#43;8rLDZ5QhZU=" rel="preload stylesheet" as="style">
</noscript>
<link rel="icon" href="https://faraz.eu.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://faraz.eu.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://faraz.eu.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://faraz.eu.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://faraz.eu.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta property="og:title" content="Linux.sh" />
<meta property="og:description" content="A bash script to harden debian/ubuntu server installs for security, as well as automating some other useful tasks like setting up a wireguard vpn." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://faraz.eu.org/posts/linux.sh/" /><meta property="og:image" content="https://faraz.eu.org/papermod-cover.png"/><meta property="article:section" content="posts" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://faraz.eu.org/papermod-cover.png"/>

<meta name="twitter:title" content="Linux.sh"/>
<meta name="twitter:description" content="A bash script to harden debian/ubuntu server installs for security, as well as automating some other useful tasks like setting up a wireguard vpn."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://faraz.eu.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Linux.sh",
      "item": "https://faraz.eu.org/posts/linux.sh/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux.sh",
  "name": "Linux.sh",
  "description": "A bash script to harden debian/ubuntu server installs for security, as well as automating some other useful tasks like setting up a wireguard vpn.",
  "keywords": [
    "bash", "security", "linux", "tui", "whiptail"
  ],
  "articleBody": "How to run  git clone https://github.com/t3dium/linux.sh.git cd linux.sh sudo bash linux.sh  It’ll work on any debian/ubuntu based distro\nWhat’s been implemented so far: (The script will allow user choice, and won’t run all the tasks listed below)\nSecurity Automations - Misc  Automated System updates Automated docker updates Hardening cron editing permissions Hardening sshd editing permissions Systemd service sandbox hardening - https://github.com/t3dium/systemd-sandboxing LKRG - prevent changes \u0026 exploits to the linux kernel Mountpoint hardening - hardening /boot, /boot/efi, and /var and hiding /proc Disable core dumps - contains sensitive info in its memory snapshots Restricting /proc/kallsyms - info on how kernel memory is laid out which makes it easier to attack the kernel itself Lynis, system audit tool Overview of open ports at the end Disable unecessary services: bluetooth bnep cpia2 firewire-core floppy n_hdlc net-pf-31 pcspkr soundcore thunderbolt uvcvideo v4l2_common. Disable unecessary network protocols: dccp sctp rds tipc Disable various compilers: as byacc yacc bcc kgcc cc gcc c++ g++, to re-enable just edit the permissions, for e.g chmod 755 /usr/bin/gcc Setting bashrc \u0026 bash_profile as immutable (prevent malicious edits such as a fake sudo function) Replacing timesyncd with chrony, since it failed to keep time up to date on my rpi suffering from time drift, leading to issues with DoH \u0026 Dnssec for e.g, also configuring chrony to use NTS which is secure ntp.  Security Automations - Networking  Psad - iptables Intrusion Detection And Prevention (prevents ddos and port scan attacks) Fail2ban - Application Intrusion Detection And Prevention Change SSH port - Defense in depth, not security by obscurity. Setup SSH key authentication and disable password authentication Disable weak ssh ciphers and MAC’s Securing dns, dnssec and encryption - partially done  Misc Automations  installing docker installing portainer, a gui for docker or installing yacht, a gui for docker installing nginx proxy manager + making some self signed certs (via mkcert) installing screenfetch installing bender - homer fork which allows editing entries via its webgui - dashboard setup a wireguard vpn server easily - pivpn - cli or setup a wireguard vpn server easily - wg-easy - web gui  Repo\n",
  "wordCount" : "349",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "linux, bash"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://faraz.eu.org/posts/linux.sh/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Faraz Ahary",
    "logo": {
      "@type": "ImageObject",
      "url": "https://faraz.eu.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script crossorigin="anonymous" src="/assets/js/theme.b20f95bb4da41ef90a2610a557a7000b2649a3f47282ec571676da6fc0427200.js" integrity="sha256-sg&#43;Vu02kHvkKJhClV6cACyZJo/RyguxXFnbab8BCcgA="></script>

<header class="header">
    <div id="progressBar"></div>
    <nav class="nav">
        <div class="logo">
            <a href="https://faraz.eu.org" accesskey="h" title="Faraz Ahary (Alt + H)">Faraz Ahary</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <input id="hamburger-input" type="checkbox"></input>
        <label id="hamburger-menu" for="hamburger-input"></label>
        <div class="overlay"></div>
        <ul id="menu">
            <li>
                <a href="https://faraz.eu.org/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://faraz.eu.org">Home</a>&nbsp;»&nbsp;<a href="https://faraz.eu.org/posts/">Posts</a></div>
    <h1 class="post-title">
      Linux.sh
    </h1>
    <div class="post-description">
      A bash script to harden debian/ubuntu server installs for security, as well as automating some other useful tasks like setting up a wireguard vpn.
    </div>
    <div class="post-meta">2 min&nbsp;·&nbsp;linux, bash&nbsp;|&nbsp;<a href="https://github.com/t3dium/t3dium.github.io/tree/main/content/posts/posts/linux.sh.md" rel="noopener noreferrer">Suggest Changes</a>

</div>
    <div class="post-meta">
</div>
  </header> <div class="toc side">
    <details id="toc"  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-to-run" aria-label="How to run">How to run</a></li>
                <li>
                    <a href="#whats-been-implemented-so-far" aria-label="What&amp;rsquo;s been implemented so far:">What&rsquo;s been implemented so far:</a><ul>
                        <ul>
                        
                <li>
                    <a href="#security-automations---misc" aria-label="Security Automations - Misc">Security Automations - Misc</a></li>
                <li>
                    <a href="#security-automations---networking" aria-label="Security Automations - Networking">Security Automations - Networking</a></li>
                <li>
                    <a href="#misc-automations" aria-label="Misc Automations">Misc Automations</a>
                </li>
            </ul>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><img loading="lazy" src="https://user-images.githubusercontent.com/83690012/228189115-40b4ed83-4391-430e-aaaf-96c221eb73fa.png" alt="image"  />
</p>
<h2 id="how-to-run">How to run<a hidden class="anchor" aria-hidden="true" href="#how-to-run">#</a></h2>
<ol>
<li><code>git clone https://github.com/t3dium/linux.sh.git</code></li>
<li><code>cd linux.sh</code></li>
<li><code>sudo bash linux.sh</code></li>
</ol>
<p>It&rsquo;ll work on any debian/ubuntu based distro</p>
<h2 id="whats-been-implemented-so-far">What&rsquo;s been implemented so far:<a hidden class="anchor" aria-hidden="true" href="#whats-been-implemented-so-far">#</a></h2>
<p><strong>(The script will allow user choice, and won&rsquo;t run all the tasks listed below)</strong></p>
<h4 id="security-automations---misc">Security Automations - Misc<a hidden class="anchor" aria-hidden="true" href="#security-automations---misc">#</a></h4>
<ul>
<li><input checked="" disabled="" type="checkbox"> Automated System updates</li>
<li><input checked="" disabled="" type="checkbox"> Automated docker updates</li>
<li><input checked="" disabled="" type="checkbox"> Hardening cron editing permissions</li>
<li><input checked="" disabled="" type="checkbox"> Hardening sshd editing permissions</li>
<li><input checked="" disabled="" type="checkbox"> Systemd service sandbox hardening - <a href="https://github.com/t3dium/systemd-sandboxing">https://github.com/t3dium/systemd-sandboxing</a></li>
<li><input checked="" disabled="" type="checkbox"> LKRG - prevent changes &amp; exploits to the linux kernel</li>
<li><input checked="" disabled="" type="checkbox"> Mountpoint hardening - hardening /boot, /boot/efi, and /var and hiding /proc</li>
<li><input checked="" disabled="" type="checkbox"> Disable core dumps - contains sensitive info in its memory snapshots</li>
<li><input checked="" disabled="" type="checkbox"> Restricting /proc/kallsyms - info on how kernel memory is laid out which makes it easier to attack the kernel itself</li>
<li><input checked="" disabled="" type="checkbox"> Lynis, system audit tool</li>
<li><input checked="" disabled="" type="checkbox"> Overview of open ports at the end</li>
<li><input checked="" disabled="" type="checkbox"> Disable unecessary services: bluetooth bnep cpia2 firewire-core floppy n_hdlc net-pf-31 pcspkr soundcore thunderbolt uvcvideo v4l2_common.</li>
<li><input checked="" disabled="" type="checkbox"> Disable unecessary network protocols: dccp sctp rds tipc</li>
<li><input checked="" disabled="" type="checkbox"> Disable various compilers: as byacc yacc bcc kgcc cc gcc c++ g++, to re-enable just edit the permissions, for e.g <code>chmod 755 /usr/bin/gcc</code></li>
<li><input checked="" disabled="" type="checkbox"> Setting bashrc &amp; bash_profile as immutable (prevent malicious edits such as a fake sudo function)</li>
<li><input checked="" disabled="" type="checkbox"> Replacing timesyncd with chrony, since it failed to keep time up to date on my rpi suffering from time drift, leading to issues with DoH &amp; Dnssec for e.g, also configuring chrony to use NTS which is secure ntp.</li>
</ul>
<h4 id="security-automations---networking">Security Automations - Networking<a hidden class="anchor" aria-hidden="true" href="#security-automations---networking">#</a></h4>
<ul>
<li><input checked="" disabled="" type="checkbox"> Psad - iptables Intrusion Detection And Prevention (prevents ddos and port scan attacks)</li>
<li><input checked="" disabled="" type="checkbox"> Fail2ban - Application Intrusion Detection And Prevention</li>
<li><input checked="" disabled="" type="checkbox"> Change SSH port - <a href="https://en.m.wikipedia.org/wiki/Defense_in_depth_(computing)">Defense in depth</a>, <strong>not</strong> security by obscurity.</li>
<li><input disabled="" type="checkbox"> Setup SSH key authentication and disable password authentication</li>
<li><input checked="" disabled="" type="checkbox"> Disable weak ssh ciphers and MAC&rsquo;s</li>
<li><input checked="" disabled="" type="checkbox"> Securing dns, dnssec and encryption - partially done</li>
</ul>
<h4 id="misc-automations">Misc Automations<a hidden class="anchor" aria-hidden="true" href="#misc-automations">#</a></h4>
<ul>
<li><input checked="" disabled="" type="checkbox"> installing docker</li>
<li><input checked="" disabled="" type="checkbox"> installing portainer, a gui for docker</li>
<li><input checked="" disabled="" type="checkbox"> or installing yacht, a gui for docker</li>
<li><input checked="" disabled="" type="checkbox"> installing nginx proxy manager</li>
<li><input checked="" disabled="" type="checkbox"> + making some self signed certs (via mkcert)</li>
<li><input checked="" disabled="" type="checkbox"> installing screenfetch</li>
<li><input checked="" disabled="" type="checkbox"> installing bender - homer fork which allows editing entries via its webgui - dashboard</li>
<li><input checked="" disabled="" type="checkbox"> setup a wireguard vpn server easily - pivpn - cli</li>
<li><input checked="" disabled="" type="checkbox"> or setup a wireguard vpn server easily - wg-easy - web gui</li>
</ul>
<p><a href="https://github.com/t3dium/linux.sh">Repo</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://faraz.eu.org/tags/bash/">bash</a></li>
      <li><a href="https://faraz.eu.org/tags/security/">security</a></li>
      <li><a href="https://faraz.eu.org/tags/linux/">linux</a></li>
      <li><a href="https://faraz.eu.org/tags/tui/">tui</a></li>
      <li><a href="https://faraz.eu.org/tags/whiptail/">whiptail</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://faraz.eu.org/posts/fluorite-store/">
    <span class="title">« Prev</span>
    <br>
    <span>Fluorite Store</span>
  </a>
  <a class="next" href="https://faraz.eu.org/posts/systemd-sandboxing/">
    <span class="title">Next »</span>
    <br>
    <span>Systemd sandboxing templates</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://faraz.eu.org">Faraz Ahary</a></span>
    <span>
        - Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer">Hugo</a> &
        <a href="https://github.com/Wonderfall/hugo-WonderMod/" rel="noopener">WonderMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script defer crossorigin="anonymous" src="/assets/js/papermod.7ea300eda6d3653624a576fbc095ccd8a0c2977756acbe5de4114132a72cc7fa.js" integrity="sha256-fqMA7abTZTYkpXb7wJXM2KDCl3dWrL5d5BFBMqcsx/o="></script>
</body>

</html>
